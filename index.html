<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>商品場所検索</title>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#111111">
  <link rel="stylesheet" href="./css/style.css">
</head>

<body>
<header>
  <div class="row">
    <input id="q" placeholder="商品名 / カテゴリ / ブランド（例：牛乳）" autocomplete="off" />
    <select id="mode" title="検索範囲">
      <option value="all">全部</option>
      <option value="name">商品名</option>
      <option value="category">カテゴリ</option>
      <option value="brand">ブランド</option>
      <option value="keywords">別名</option>
    </select>
    <button id="btn">検索</button>
    <button id="refresh" style="background:#444;">再読込</button>
    <button id="scan" style="background:#0a7;">QR</button>
  </div>
  <div class="catBar" id="catBar"></div>
</header>

<main>
  <div class="mapWrap" id="mapWrap">
    <img src="./map.jpg" alt="店内マップ" />
  </div>
  <div class="meta" id="meta"></div>
  <div class="list" id="list"></div>
</main>

<div id="scanModal">
  <div class="scan-content">
    <div class="scan-header">
      <strong>QRコード読み取り</strong>
      <button id="scanClose" style="border:0; background:#444; color:#fff; border-radius:10px; padding:8px 10px;">閉じる</button>
    </div>
    <div class="scan-body">
      <video id="scanVideo" playsinline autoplay muted></video>
      <canvas id="scanCanvas" style="display:none;"></canvas>
      <div id="scanMsg" style="margin-top:10px; font-size:13px; color:#555;"></div>
    </div>
  </div>
</div>

<script src="https://unpkg.com/jsqr/dist/jsQR.js"></script>

<script type="module" src="./js/app.js"></script>
</body>
</html>